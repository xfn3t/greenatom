# Проект для Гринатома

![greenatom](https://avatars.mds.yandex.net/i?id=1891506b218b46016d31557cbea846a5_l-5468635-images-thumbs&n=13)

---

## Задача

Необходимо реализовать микросервис, который будет выполнять роль хранилища различных файлов и их атрибутов.

Микросервис должен предоставлять HTTP API и принимать/отдавать запросы/ответы в формате JSON.

Разработка UI-интерфейса не требуется. Для тестирования можно использовать Postman или аналог.

Должны быть реализованы следующие API-методы:

1. Создание файла.

На вход методу отправляется JSON, включающий в себя файл (в формате base64) и его атрибуты (название - title, дата и время отправки - creation_date, краткое описание документа - description), на выходе метод возвращает id созданного файла.

2. Получение файла.

На вход методу отправляется id файла, на выходе метод возвращает JSON, включающий в себя файл (в формате base64) и его атрибуты (название - title, дата и время отправки - creation_date, краткое описание документа - description)

## Решение задачи

Было разработано приложение, которое позволяет читать, создавать и удалять файлы используя базу данных PostgreSQL.
Создается таблица с названием t_file и хранит в себе:
- Название файла
- Описание файла
- Дату создания файла
- Файл

Для сохранения файла в базе данных используется стандарт кодирования Base64

## Стек технологий

- Java SE 17
- Spring/Spring boot 3.x
- PostgreSQL
- Data JPA 
- Liquibase
- JUnit, Mocktio
- Testcontainers
- Docker

---

## Запуск проекта


```shell
docker-compose up --build
```

---

## Базовые конечные точки

### GET /

Получение всех файлов

Пример ответа

```json
[
  {
    "title": "New file",
    "creation_date": "2024-09-07T15:38:55.417413Z",
    "description": "this description new file"
  }
]
```

### GET /{id}

**Параметры запроса:**
- `id` (integer, path): получить файл по ID.

**Пример ответа**

Если ID существует - HTTP 200 OK

```json
{
  "fileId": 1,
  "title": "New File",
  "creation_date": "2024-09-07T15:38:55.417413Z",
  "description": "this description new file",
  "file": "/9j/4AAQSkZJRgABAQEASABIAAD..."
}
```

Если ID не существует - HTTP 404 Not Found

### POST /

Добавление нового файла

**Пример запроса**

```json
{
  "title": "New File 2",
  "description": "description for new file 2",
  "file": "42DSFGgGAFgafDG//"
}
```

**Пример ответа**

```json
{
  "fileId": 2
}
```

### DELETE /{id}

**Параметры запроса:**
- `id` (integer, path): ID файла для удаления.

**Пример ответа**

Если ID существует - **HTTP 200 OK**

Если ID не существует - **HTTP 404 Not Found**
